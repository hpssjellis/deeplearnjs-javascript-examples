<script src="https://unpkg.com/deeplearn@0.5.1/dist/deeplearn.js"> </script> 
Version 4 <br><br>
<h2 align=center>CSV to K Nearest Neighbor (KNN) Classifier</h2>






Original CSV:<br><textarea id="myArea02" rows=10 cols=70 nowrap placeholder="length,width,height,label&#10;2,3,4,small&#10;4,6,7,big">
sepal_length,sepal_width,petal_length,petal_width,species
5.1,3.5,1.4,0.2,setosa
4.9,3,1.4,0.2,setosa
4.7,3.2,1.3,0.2,setosa
</textarea><br>

<input type=button value="Massage Data" onclick="{
 
   

}"><br><br>








Data: <br><textarea id="myArea01" rows=10 cols=70 nowrap placeholder="length,width,height,label&#10;2,3,4,small&#10;4,6,7,big">
1.0, 9.8, 5.0, 2.3, 12.1
</textarea><br>

The Headings: <input id="myText03" size=70 type=text value="Size" placeholder="legnth, width, height"><br>
The Labels: <input id="myText02" size=70 type=text value="'small','big','medium','small','big'" placeholder="4.2, 5.1, 8.6"><br>
The unknown: <input id="myText01" type=text value="3.5" placeholder="4.2, 5.1, 8.6"><br>

The K value: <input id="myKvalue" type=text value="3" placeholder="5"><br>


<input  type="button" value="Enter Tensor" onclick="{
  (async function (){
   myMainArray = document.getElementById('myArea01').value.split(',')
                                                    
   myData = dl.tensor1d(myMainArray); 
   myUnknown = dl.tensor1d(document.getElementById('myText01').value.split(',')); 
                                           
   myHeadingsArray = document.getElementById('myText03').value.split(',')
   myLabelsArray = document.getElementById('myText02').value.split(',')
   
   myLabelsArray.length
   myOriginalLoc = new Array(myLabelsArray.length)
   for (x=0;  x <= myLabelsArray.length-1; x++ ){
      myOriginalLoc[x] = x
   }     
   
                                                   
 
      document.getElementById('myDiv02').innerHTML +=  'myData tensor is [' + await myData.data() +']<br>'   
      document.getElementById('myDiv02').innerHTML +=  'Length ' + myLabelsArray.length + ', myLabels tensor is [' + myLabelsArray +']<br>'   
      document.getElementById('myDiv02').innerHTML +=  'myUnknown tensor is [' + await myUnknown.data() +']<br><br>'  
   })()                                                                                                           
}">

<input  type="button" value="K Nearest Neighbor 1D Tensor" onclick="{
                                                          
  (async function (){

  
      //const mySqrt = dl.tensor1d([0.5, 0.5, 0.5, 0.5, 0.5]);                                                                             
      const mySqrt = dl.fill([myLabelsArray.length], 0.5)

    
      const myDiff = dl.sub(myData, myUnknown);   
      const mySquaredDiff = dl.mul(myDiff, myDiff);
      const myKNN = mySquaredDiff.pow(mySqrt) 
      myKnnArray = await myKNN.data()                                                                            
                                                                                       
      document.getElementById('myDiv02').innerHTML +=  'The KNN tensor is [' + myKnnArray +']<br>'

      //myKnnArray = await myKNN.buffer()
      
                                                                    
       //alert(myKnnArray)                                           
      // alert(myLabelsArray)                                           
      // alert(myOriginalLoc)                                                             
                                                                    
      myJoinedArray = new Array(myLabelsArray.length)

      for (y=0; y <= myLabelsArray.length-1; y++){
         myJoinedArray[y] = new Array(3)
      }




      myJoinedArray = myJoinedArray.map(function(value, index){
            return [myKnnArray[index], myLabelsArray[index], myOriginalLoc[index]];
         })

                                   
       //alert(myJoinedArray)      
    
   })()
                                                        
}">









<input  type="button" value="Sort" onclick="{

// sort the triple array of KNN, label, location in original array                                            
                                            
myJoinedArray.sort(function(a,b){
    return a[0] - b[0];
});
//alert(myJoinedArray)    
alert(myMainArray)
myTemp=''
for (c=0;  c <= parseInt(document.getElementById('myKvalue').value)-1;   c++){
   myTemp += myMainArray[myJoinedArray[c][2]] +', '                                            
    alert(myJoinedArray[c][2])
  }                                            

 alert(myTemp)                                                 
}">

<div id="myDiv02">...<br></div><br>
